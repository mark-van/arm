# MoveIt Config Package

Author: Jonathan Qiao

Email: jonathanqfxw@gmail.com

# Descripton:

**This package is meant to be an environment to simulate the arm in Gazebo**

Vast majority of the config files in configs and launch folders are generated by MoveIt Setup Assistant (MSA). ***TRY TO EDIT THE FILES IN CONFIG AND LAUNCH FOLDERS AS LITTLE AS POSSIBLE.*** The reason being that once the file is edited manually, MSA will not try to change it after reconfiguring with MSA. Try to use MSA to change configurations as much as possible, for it is much more robust and coprehensive.

# Usage

## Using MoveIt Setup Assistant (MSA) in this package context

1. Make sure MoveIt is installed. To install MoveIt run the following command in terminal

```shell
sudo apt install ros-noetic-moveit
```

2. Open a terminal and enter the following commands (No sourcing nessesary).

```shell
roslaunch moveit_setup_assistant setup_assistant.launch
```

Then it should open this:
![MSA launched](./MoveIt_setup_assistant_launch.png)

3. Choose "Edit Existing MoveIt Configuration Package" and navigate to the folder *../arm/moveit_config/*

4. Now edit the config as you please


**For more on how to use MSA check out MoveIt's guide:**

[MoveIt Guide](https://ros-planning.github.io/moveit_tutorials/doc/setup_assistant/setup_assistant_tutorial.html)


## Launch Simulation in Gazebo

1. Make sure Gazebo is installed. To install Gazebo follow this [tutorial](https://gazebosim.org/tutorials?tut=ros_installing&cat=connect_ros)

2. Make sure the ros controller packages is installed. To install the packages run the following command.

```shell
sudo apt-get install ros-noetic-ros-control ros-noetic-ros-controllers
```

3. To launch the Gazebo simulation with this package, use the following command

```shell
source <path to workspace>/arm/devel/setup.bash

roslaunch moveit_config gazebo.launch
```

You should see the following showing up:

![Gazebo preview](Gazebo_preview.png)


4. (OPTIONAL) The previous steps will only open up Gazebo with the arm loaded. In order to control the joints you need to interact with the joint_state_controller. To do this, the easiest way is to use the rqt_joint_trajectory_controller, a GUI controller. To do this first make sure the GUI controller is installed with the following command.

```shell
sudo apt install ros-noetic-rqt-joint-trajectory-controller
```
5. (OPTIONAL) Use the following command in another terminal after step 2 is running in the first terminal to open the GUI.

```shell
source <path to workspace>/arm/devel/setup.bash

rosrun rqt_joint_trajectory_controller rqt_joint_trajectory_controller
```

After everything runs smoothly you should see this:

![Controller Gui](./Controller_gui_preview.png)

